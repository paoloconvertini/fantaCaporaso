<div class="players-page">
    <h2>Calciatori liberi</h2>

    <!-- Filtro ruolo -->
    <label for="role">Ruolo:</label>
    <select id="role" [(ngModel)]="selectedRole" (change)="onRoleChange()">
        <option [ngValue]="null">Tutti</option>
        <option *ngFor="let r of roles" [ngValue]="r">{{ r }}</option>
    </select>

    <!-- Upload Excel (solo admin) -->
    <div class="upload-section" *ngIf="isAdmin">
        <input type="file" (change)="onFileSelected($event)" />
        <button (click)="uploadFile()" [disabled]="!selectedFile">Carica Excel</button>
    </div>

    <div *ngIf="uploadResult" class="upload-result">
        <pre>{{ uploadResult | json }}</pre>
    </div>

    <!-- Tabella giocatori -->
    <div *ngIf="loading" class="loading">Caricamento...</div>
    <table *ngIf="!loading">
        <thead>
        <tr>
            <th>Nome</th>
            <th>Squadra</th>
            <th>Ruolo</th>
            <th>Valore</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let row of players">
            <td>{{ row.name }}</td>
            <td>{{ row.team }}</td>
            <td>{{ row.role }}</td>
            <td>{{ row.valore }}</td>
        </tr>
        </tbody>
    </table>
</div>
