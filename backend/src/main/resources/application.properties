# ========= COMUNE =========
quarkus.http.port=8080
quarkus.http.host=0.0.0.0
quarkus.http.cors=true
quarkus.http.cors.methods=GET,POST,OPTIONS
quarkus.http.cors.origins=${CORS_ORIGINS:*}

# Config custom app
admin.pin=${ADMIN_PIN:1234}
app.credits.total=${APP_CREDITS_TOTAL:500}
app.random.mode=${APP_RANDOM_MODE:ROLE}
app.roster.portieri=${APP_ROSTER_PORTIERI:3}
app.roster.difensori=${APP_ROSTER_DIFENSORI:8}
app.roster.centrocampisti=${APP_ROSTER_CENTROCAMPISTI:8}
app.roster.attaccanti=${APP_ROSTER_ATTACCANTI:6}

# ========= DATASOURCE =========
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://${POSTGRES_HOST:localhost}:${POSTGRES_PORT:5432}/${POSTGRES_DB:fantasta}
quarkus.datasource.username=${POSTGRES_USER:fantasta}
quarkus.datasource.password=${POSTGRES_PASSWORD:devpass}

# Pool (ridotto se usi Neon free tier)
quarkus.datasource.jdbc.max-size=10

# ========= ORM =========
# Allineiamo dev e prod ? sempre update
quarkus.hibernate-orm.database.generation=update

# ========= DEV override =========
%dev.quarkus.http.cors.origins=http://localhost:4200,http://127.0.0.1:4200

# ? OIDC Keycloak
quarkus.oidc.auth-server-url=http://localhost:8081/realms/fantasta
quarkus.oidc.client-id=fantasta-backend
quarkus.oidc.credentials.secret=${KEYCLOAK_BACKEND_SECRET}
quarkus.oidc.tls.verification=none

# ? Protezione default
quarkus.http.auth.permission.public.paths=/public/*
quarkus.http.auth.permission.public.policy=permit

quarkus.http.auth.permission.authenticated.paths=/*
quarkus.http.auth.permission.authenticated.policy=authenticated
